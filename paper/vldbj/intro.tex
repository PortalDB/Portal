\section{Introduction}
\label{sec:intro}

\vera{UNREVISED}

% General motivation
The importance of networks in scientific and commercial domains cannot
be overstated.  Considerable research and engineering effort is being
devoted to developing effective and efficient graph representations
and analytics.  Efficient graph abstractions and analytics for {\em
  static graphs} are available to researchers and practitioners in
scope of open source platforms such as Apache Giraph, Apache Spark /
GraphX~\cite{DBLP:conf/osdi/GonzalezXDCFS14} and GraphLab /
PowerGraph~\cite{DBLP:conf/osdi/GonzalezLGBG12}.

Arguably the most interesting and important questions one can ask
about networks have to do with their evolution, rather than with their
static state.  Analysis of {\em evolving graphs} has been receiving
increasing
attention~\cite{DBLP:journals/csur/AggarwalS14,Chan2008,Kan2009,Miao2015,Ren2011,Semertzidis2015}.
Yet, despite much recent activity, and despite increased variety and
availability of evolving graph data, systematic support for scalable
querying and analysis of evolving graphs still lacks.  This support is
urgently needed, due first and foremost to the scalability and
efficiency challenges inherent in evolving graph analysis, but also to
considerations of usability and ease of dissemination.  The goal of
our work is to fill this gap.  In this paper, we present an algebraic
query language called \tg algebra, or \tga, and its scalable
implementation in \ql, an open-source distributed framework on top of
Apache Spark.

Our goal in developing \tga is to give users an ability to concisely
express a wide range of common analysis tasks over evolving graphs,
while at the same time preserving inter-operability with temporal
relational algebra (\tra).  Implementing (non-temporal) graph querying
and analytics in an RDBMS has been receiving renewed
attention~\cite{DBLP:conf/sigmod/AbergerTOR16,DBLP:conf/sigmod/SunFSKHX15,DBLP:journals/pvldb/Xirogiannopoulos15},
and our work is in-line with this trend. Our data model is based on
the temporal relational model, and our algebra corresponds to temporal
relational algebra, but is designed specifically for evolving graphs.

\eat{We give a translation of our operators in relational algebra, and, as
a consequence, can implement our algebraic framework on top of a
relational engine.  Th advantages of incorporating graph querying
into a general-purpose relational system are two-fold: usability and
access to the relational data modeling and query processing
infrastructure.}

\eat{For this reason our data model is based on the temporal relational
model, and our query language corresponds to temporal relational
calculus, a two-sorted logic with variables and quantifiers explicitly
ranging over the time domain~\cite{DBLP:reference/db/Toman09}, for
graphs.}

We represent graph evolution, including changes in topology and in
attribute values of vertices and edges, using the \tg abstraction ---
a collection of temporal SQL relations with appropriate integrity
constraints.  An example of a \tg is given in Figure~\ref{fig:tg_ve},
where we show evolution of a co-authorship network.

\tga can be viewed as \tra for graphs, and so does not support general
recursion or transitive closure computation. (Although, as we will see
in Section~\ref{sec:analytics}, Pregel-style graph analytics such as
PageRank are supported as an extension.)  For this reason, we also do
not support regular path queries (RPQ) or the more general path query
classes (CRPQ and ECRPQ).  Extending our formalism with recursion and
path queries is non-trivial, and we leave this to future work.

Rather than focusing on path computation and graph traversal, we
stress the tasks that perform whole-graph analysis over time.  Several
such tasks are described next.  Additional examples can be found in
SocialScope~\cite{Amer-Yahia2009} --- a closed non-temporal algebra
for multigraphs that is motivated by information discovery in social
content sites.  It is not difficult to show that the graph (rather
than multigraph) versions of all SocialScope operations can be
expressed, and augmented with the temporal dimension, in \tga.

\input{usecases}

\subsection{Contributions and roadmap}

%
%\begin{enumerate}[noitemsep,leftmargin=*]
%\begin{description}[noitemsep]
%
 We propose a representation of an evolving graph, called a \tg, which
 captures the evolution of both graph topology and vertex and edge
 attributes (Section~\ref{sec:model}), and develop a compositional \tg
 algebra, \tga (Section~\ref{sec:algebra}).
%
We show a reduction from \tga to temporal relational algebra
  \tra, using a combination of standard operators and \tg-specific
  primitives, and present formal properties of \tga
  (Section~\ref{sec:formal}).
%
We present an implementation in scope of the \ql system, built
  on Apache Spark / GraphX~\cite{DBLP:conf/osdi/GonzalezXDCFS14}. \ql
  supports several access methods that correspond to different
  trade-offs in temporal and structural locality
  (Section~\ref{sec:sys}).
%
We conduct an extensive experimental evaluation with real datasets,
demonstrating that \ql scales (Section~\ref{sec:exp}).  We also
illustrate the usability throughout the paper, with a variety of
real-life analysis tasks that can be concisely expressed in \tga.

%\end{enumerate}


