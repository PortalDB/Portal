\subsection{Examples}
\label{sec:example}

With the \ql operators in place, we can now show how the motivating
queries can be specified.

{\bf Question:} In a sparse communication network, on what time scale can we
detect communities?

{\bf Process:} 
\begin{enumerate}[noitemsep]
\item Compute new vertices with temporal windows of a set size:

$T_1 = _v\vartheta_{6 months,exists,always,first(name),any}( \ttt)$

\item Compute connected components analytic:

$T_2 = pregel_{cc} (T_1)$

\item Compute new vertices grouping vertices by their component,
  accumulating total group size:

$T_3 = _{component}\vartheta_{1 change,exists,exists,count(name),any}(T_2)$

\item Filter out vertices that represent communities too small to be
  useful (e.g., of 1-2 people):

$T_4 = \sigma_{size > 2,true}(T_3)$

\end{enumerate}

We can now examine the output and repeat the process with a different
window in step 1.

\eat{
Query: $\sigma_{size > 2,true}($ \\ $ _{component}\vartheta_{1
  change,exists,exists,count(name),any}($ \\ $ pregel_{cc} (_v\vartheta_{6
  months,exists,always,first(name),any}( \ttt))))$
}

{\bf Question:} Are there high influence nodes and is that behavior
persistent in time?

{\bf Process:}
\begin{enumerate}[noitemsep]
\item Compute in-degree (prominence) of each vertex for each time
interval it changed:

$T_1 = \gamma_{true,true,dst,1,count}( \ttt)$

\item Compute new vertices with temporal window equal to the overall
  timespan, collecting degree data into a map:

$T_2 = _v\vartheta_{lifetime,exists,exists,map(degree),any}(T_1)$

\item Apply map to compute the coefficient of variation from the
  interval-degree map:

$T_3 = map_{stdev(degree)/mean(degree)*100}(T_2)$

\end{enumerate}

\eat{
Query: $map_{stdev(degree)/mean(degree)*100}($ \\ 
$ _v\vartheta_{lifetime,exists,exists,map(degree),any}(
\gamma_{true,true,dst,1,count}( \ttt)))$
}

{\bf Question:} How has graph in-degree centrality changed over time?

{\bf Process:}
\begin{enumerate}[noitemsep]
\item Compute new vertices with temporal windows of a set size:

$T_1 = _v\vartheta_{2 months,exists,always,any,any}( \ttt)$

\item Compute in-degree of each vertex:

$T_2 = \gamma_{true,true,dst,1,count}(T_1)$

\item Compute new vertex grouping all vertices co-existing in time
  into one, computing the sum, count, and max of degree:

$T_3 = _1\vartheta_{1 change,exists,exists,max(degree)\&sum(degree)\&count(degree),any}(T_2)$

\item Apply map to compute the degree centrality:

$T_4 = map_{(max*count-sum)/(count^2-3*count+2)}(T_3)$

\end{enumerate}

\eat{
Query: $map_{(max*count-sum)/(count^2-3count+2)}($ \\
$ _1\vartheta_{1 change,exists,exists,max(degree)\&sum(degree)\&count(degree),any}($ \\
$ \gamma_{true,true,dst,1,count}( _v\vartheta_{2 months,exists,always,any,any}( \ttt))))$
}
